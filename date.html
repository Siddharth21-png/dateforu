<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Date</title>
    <link rel="stylesheet" href="css/date.css" />
  </head>

<body>

<!-- âœ… Music iframe -->
<iframe src="musicplayer.html"
        allow="autoplay"
        style="display:none;"
        id="musicFrame"></iframe>

<h1 title="choose a date">when are you free cutie ...</h1>

<form class="form-group" action="food.html" method="GET">
  <label>Which day: (select a date cutie..)</label>
  <div>
    <input type="date" name="selectedDate" title="Select a date" required />
    <button class="button" type="submit">Submit</button>
  </div>
</form>

<script>
  // Clear saved music time so it starts from beginning
  localStorage.removeItem("musicTime");
  
  // Trigger play on first user interaction
  let played = false;
  
  function tryPlayMusic() {
    if (played) return;
    
    const iframe = document.getElementById('musicFrame');
    if (iframe && iframe.contentWindow) {
      try {
        iframe.contentWindow.postMessage('play', '*');
        played = true;
      } catch (e) {
        console.log('Could not send play message:', e);
      }
    }
  }
  
  // Try on any user interaction
  document.addEventListener('click', tryPlayMusic, { once: true });
  document.addEventListener('touchstart', tryPlayMusic, { once: true });
  document.addEventListener('keydown', tryPlayMusic, { once: true });
</script>

</body>
</html>